<!--  Display the name of the current weather station -->
<h1 class="title is-2">{{station.name}}</h1>

<!--  Weather Report Submission Form  https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Forms/Your_first_form -->
<div class="box">
  <h2 class="subtitle is-4">Add New Weather Report</h2>

  <!--  Form submits a POST request to /station   -->
  <form action="/station/{{station.id}}/report" method="POST">
    
    <!--  Weather Code Input  -->
    <div class="field">
      <label class="label">Weather Code</label>
      <div class="control">
        <input class="input" type="number" name="code" required />
      </div>
    </div>

    <!--  Temperature  -->
    <div class="field">
      <label class="label">Temperature (°C)</label>
      <div class="control">
        <input class="input" type="number" step="0.1" name="temperature" required />
      </div>
    </div>

    <!-- Wind Speed   -->
    <div class="field">
      <label class="label">Wind Speed (km/h)</label>
      <div class="control">
        <input class="input" type="number" step="0.1" name="windSpeed" required />
      </div>
    </div>

    <!--  Pressure -->
    <div class="field">
      <label class="label">Pressure (hPa)</label>
      <div class="control">
        <input class="input" type="number" name="pressure" required />
      </div>
    </div>

    <!--  Submit button to add the weather report -->
    <div class="control mt-3">
      <button class="button is-link" type="submit">Add Report</button>
    </div>
  </form>
</div>

<!--  Divider between form and report list -->
<hr />
<h2 class="subtitle is-4">Reports</h2>

<!--  Check if there are any reports for this station  https://handlebarsjs.com/guide/builtin-helpers.html#if-->
{{#if reports.length}}

  <!--  Display a table of all reports -->
  <table class="table is-bordered is-striped is-fullwidth">
    <thead>
      <tr>
        <th>Temperature (°C)</th>     <!-- Temperature reading -->
        <th>Wind Speed (km/h)</th>    <!-- Wind speed reading -->
        <th>Pressure (hPa)</th>       <!-- Pressure reading -->
      </tr>
    </thead>

    <tbody>
      <!--  Loop through each report in the reports array https://handlebarsjs.com/guide/builtin-helpers.html#each-->
      {{#each reports}}
        <tr>
          <td>
            {{this.code}}<br />
            <!--  Load a weather icon based on the report code -->
            <img src="/images/{{this.code}}.png" alt="Weather Icon" />
          </td>
          <td>{{this.temperature}}</td>
          <td>{{this.windSpeed}}</td>
          <td>{{this.pressure}}</td>
        </tr>
      {{/each}}
    </tbody>
  </table>

<!--  If no reports exist, show a warning message -->
{{else}}
  <div class="notification is-warning">No reports added yet.</div>
{{/if}}
